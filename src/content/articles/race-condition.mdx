---
title: "–°–æ—Å—Ç–æ—è–Ω–∏–µ –≥–æ–Ω–∫–∏"
description: "–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –±—ã–≤–∞—é—Ç –Ω–µ–ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º—ã–º–∏, –ø–æ—Å–∫–æ–ª—å–∫—É —Ñ–∏–∑–∏—á–µ—Å–∫–∏ –º–æ–≥—É—Ç –≤—ã–ø–æ–ª–Ω—è—Ç—å—Å—è –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ –æ—Å–Ω–æ–≤–Ω–æ–º—É –ø–æ—Ç–æ–∫—É, –ø–æ—ç—Ç–æ–º—É –æ—á–µ–Ω—å –≤–∞–∂–Ω–æ —Å–ª–µ–¥–∏—Ç—å –∑–∞ –∞–∫—Ç—É–∞–ª—å–Ω–æ—Å—Ç—å—é –¥–∞–Ω–Ω—ã—Ö, –∫–æ—Ç–æ—Ä—ã–µ –æ–Ω–∏ –Ω–∞–º –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç."
pubDate: "Jul 4 2023"
heroImage: "/hacknote-js/images/race-condition/hero.png"
telegramPostId: "41"
---

import Demo from "@components/astro/Demo.astro";
import Aside from "@components/astro/Aside.astro";
import {
  RaceCondition,
  RaceConditionTimeline,
  RaceConditionFixed,
  RaceConditionFixedTimeline,
  AbortControllerTimeline,
  RequestRace,
  RepoSearch,
} from "@articleAssets/race-condition";

–ü—Ä–∏ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤ –º—ã —á–∞—Å—Ç–æ —Å—Ç–∞–ª–∫–∏–≤–∞–µ–º—Å—è —Å –æ–±—Ä–∞–±–æ—Ç–∫–æ–π –∫–∞–∫–∏—Ö-–ª–∏–±–æ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π. –ó–∞—á–∞—Å—Ç—É—é –≤ –∫–∞—á–µ—Å—Ç–≤–µ —Ç–∞–∫–∏—Ö –æ–ø–µ—Ä–∞—Ü–∏–π –≤—ã—Å—Ç—É–ø–∞—é—Ç —Å–µ—Ç–µ–≤—ã–µ –∑–∞–ø—Ä–æ—Å—ã. –°–µ—Ç—å –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –º–Ω–æ–∂–µ—Å—Ç–≤–∞ —Ä–∞–∑–Ω—ã—Ö –≤–µ—â–µ–π, —á—Ç–æ –¥–µ–ª–∞–µ—Ç –µ—ë –≤–µ—Å—å–º–∞ –Ω–µ–ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º–æ–π. –ü—Ä–µ–¥–ª–∞–≥–∞—é —Ä–∞—Å—Å–º–æ—Ç—Ä–µ—Ç—å –Ω–∞ –ø—Ä–∏–º–µ—Ä–∞—Ö, —á—Ç–æ —è –∏–º–µ—é –≤ –≤–∏–¥—É.

## –ì–æ–Ω–∫–∏ –∫–ª–æ–Ω–æ–≤

–£—Å—Ç—Ä–æ–∏–º –≥–æ–Ω–∫–∏ –ø–æ–∫–µ–º–æ–Ω–æ–≤: –≤—ã—Å—Ç–∞–≤–∏–º –Ω–∞ –¥—É—ç–ª—å –ü–∏–∫–∞—á—É –∏... –µ—â—ë –æ–¥–Ω–æ–≥–æ –ü–∏–∫–∞—á—É! –ü–æ—á–µ–º—É –±—ã –∏ –Ω–µ—Ç?

```ts
fetch("https://pokeapi.co/api/v2/pokemon/pikachu").then(() => {
  console.log("1");
});

fetch("https://pokeapi.co/api/v2/pokemon/pikachu").then(() => {
  console.log("2");
});
```

**–í–æ–ø—Ä–æ—Å:** ~~–≤ –∫–∞–∫–æ–º –ø–æ—Ä—è–¥–∫–µ –≤—ã–≤–µ–¥—É—Ç—Å—è —Ü–∏—Ñ—Ä—ã –≤ –∫–æ–Ω—Å–æ–ª–∏ (–ø—Ä—è–º–æ –∫–∞–∫ –Ω–∞ —Å–æ–±–µ—Å–µ–¥–æ–≤–∞–Ω–∏–∏)~~ –∫–∞–∫–æ–π –∏–∑ –¥–≤—É—Ö –ü–∏–∫–∞—á—É –ø—Ä–∏–¥—ë—Ç –∫ —Ñ–∏–Ω–∏—à—É –ø–µ—Ä–≤—ã–º?

<Demo title="–ö–∞–∫–æ–π –∑–∞–ø—Ä–æ—Å –≤—ã–ø–æ–ª–Ω–∏—Ç—Å—è –±—ã—Å—Ç—Ä–µ–µ?">
  <Aside title="–°–æ–≤–µ—Ç">
  –†–µ–∫–æ–º–µ–Ω–¥—É—é –∑–∞–ø—É—Å—Ç–∏—Ç—å –¥–µ–º–∫—É –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–∞–∑ –ø–æ–¥—Ä—è–¥ –∏ —Å—Ä–∞–≤–Ω–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã.
  </Aside>

<br />

  <RequestRace client:visible />
</Demo>

–ù–∞ —Å–∞–º–æ–º –¥–µ–ª–µ –Ω–∞ —ç—Ç–æ—Ç –≤–æ–ø—Ä–æ—Å –Ω–µ—Ç –æ–¥–Ω–æ–∑–Ω–∞—á–Ω–æ–≥–æ –æ—Ç–≤–µ—Ç–∞ –∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã —ç—Ç–æ–≥–æ —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞ –º–æ–≥—É—Ç –æ—Ç–ª–∏—á–∞—Ç—å—Å—è –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞, —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –±–µ–∫–µ–Ω–¥–∞ –∏–ª–∏ –¥–∞–∂–µ –±—Ä–∞—É–∑–µ—Ä–∞. –ß—Ç–æ –∂–µ –Ω–∞–º –¥–∞—ë—Ç —ç—Ç–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è?

## –ß—Ç–æ –Ω–µ —Ç–∞–∫ —Å –º–æ–∏–º –ø–æ–∏—Å–∫–æ–º?

–†–∞—Å—Å–º–æ—Ç—Ä–∏–º –¥–æ–≤–æ–ª—å–Ω–æ —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—ë–Ω–Ω—ã–π —Å—Ü–µ–Ω–∞—Ä–∏–π —Å –ø–æ–∏—Å–∫–æ–º, —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –∫–æ—Ç–æ—Ä–æ–≥–æ –ø–µ—Ä–µ–∑–∞–ø—Ä–∞—à–∏–≤–∞—é—Ç—Å—è –ø—Ä–∏ –∫–∞–∂–¥–æ–º –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º –ø–æ–∏—Å–∫–æ–≤–æ–π —Å—Ç—Ä–æ–∫–∏. –í —Å–ª—É—á–∞–µ —Å React –º–æ–∂–Ω–æ –Ω–∞–ø–∏—Å–∞—Ç—å —Å–ª–µ–¥—É—é—â–∏–π –∫–æ–¥:

```ts
// –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –∑–∞–ø—Ä–æ—Å
// –Ω–∞ –∫–∞–∂–¥–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ –ø–æ–∏—Å–∫–æ–≤–æ–π —Å—Ç—Ä–æ–∫–∏
useEffect(() => {
  fetchData(searchString).then((data) => {
    setData(data);
  });
}, [searchString]);
```

–§—É–Ω–∫—Ü–∏—è `fetchData` –≤ –¥–∞–Ω–Ω–æ–º –ø—Ä–∏–º–µ—Ä–µ –±—É–¥–µ—Ç —ç–º—É–ª–∏—Ä–æ–≤–∞—Ç—å –Ω–µ—Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å —Å–µ—Ç–µ–≤–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞:

```ts
export async function fetchData(text: string): Promise<string> {
  // –ñ–¥—ë–º –æ—Ç 50 –¥–æ 1000 –º–∏–ª–ª–∏—Å–µ–∫—É–Ω–¥...
  await sleep(getRandomNumber(50, 1000));

  // ...–∏ –ø—Ä–æ—Å—Ç–æ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º –∏—Å—Ö–æ–¥–Ω—ã–π —Ç–µ–∫—Å—Ç
  return text;
}
```

–ü—Ä–∏–º–µ—Ä –º–æ–∂–µ—Ç –ø–æ–∫–∞–∑–∞—Ç—å—Å—è –¥–æ–≤–æ–ª—å–Ω–æ –±–µ—Å—Å–º—ã—Å–ª–µ–Ω–Ω—ã–º, –Ω–æ –∑–∞—Ç–æ –æ–Ω –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –Ω–∞–≥–ª—è–¥–Ω–æ –ø—Ä–æ–∏–ª–ª—é—Å—Ç—Ä–∏—Ä—É–µ—Ç –ø—Ä–æ–±–ª–µ–º—É:

<Demo title="–ü—Ä–æ–±–ª–µ–º–Ω—ã–π –ø–æ–∏—Å–∫ (–¥–µ–º–æ)">
  <RaceCondition client:visible />
</Demo>

–û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ –Ω–∞ —Ç–æ, —á—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —Å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–º –≤–æ –≤—Ä–µ–º—è –≤–≤–æ–¥–∞ –∏ —á—Ç–æ –º—ã –ø–æ–ª—É—á–∞–µ–º –≤ –∏—Ç–æ–≥–µ.

–°–∫–æ—Ä–µ–µ –≤—Å–µ–≥–æ –≤—ã —É–∂–µ –¥–æ–≥–∞–¥–∞–ª–∏—Å—å, –≤ —á—ë–º –¥–µ–ª–æ, –Ω–æ —á—Ç–æ–±—ã —Ç–æ—á–Ω–æ –ø–æ–Ω—è—Ç—å, —Å —á–µ–º –º—ã –∏–º–µ–µ–º –¥–µ–ª–æ, –ø—Ä–µ–¥–ª–∞–≥–∞—é —Ä–∞—Å—Å–º–æ—Ç—Ä–µ—Ç—å –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –ø—Ä–æ–∏—Å—Ö–æ–¥—è—â–∏—Ö —Å–æ–±—ã—Ç–∏–π –Ω–∞ –¥–∏–∞–≥—Ä–∞–º–º–µ:

<Demo title="–ü—Ä–æ–±–ª–µ–º–Ω—ã–π –ø–æ–∏—Å–∫ (–¥–∏–∞–≥—Ä–∞–º–º–∞)">
  <RaceConditionTimeline client:visible />
</Demo>

–ü–æ –∫–∞–∫–æ–π-—Ç–æ –ø—Ä–∏—á–∏–Ω–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –ø–µ—Ä–≤–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞ –∑–∞–Ω—è–ª–æ –±–æ–ª—å—à–µ –≤—Ä–µ–º–µ–Ω–∏, —á–µ–º –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –≤—Ç–æ—Ä–æ–≥–æ, –Ω–æ –µ–≥–æ –¥–∞–Ω–Ω—ã–µ —É–∂–µ –Ω–µ–∞–∫—Ç—É–∞–ª—å–Ω—ã. –¢–∞–∫–∞—è —Å–∏—Ç—É–∞—Ü–∏—è –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è [¬´—Å–æ—Å—Ç–æ—è–Ω–∏–µ –≥–æ–Ω–∫–∏¬ª](https://ru.wikipedia.org/wiki/–°–æ—Å—Ç–æ—è–Ω–∏–µ_–≥–æ–Ω–∫–∏), –ø–æ—Å–∫–æ–ª—å–∫—É –º–µ–∂–¥—É –∑–∞–ø—Ä–æ—Å–∞–º–∏ –æ–±—Ä–∞–∑–æ–≤–∞–ª–∞—Å—å ¬´–≥–æ–Ω–∫–∞¬ª –∏ –º—ã –Ω–µ –º–æ–∂–µ–º –∑–∞—Ä–∞–Ω–µ–µ –ø—Ä–µ–¥—Å–∫–∞–∑–∞—Ç—å –ø–æ–±–µ–¥–∏—Ç–µ–ª—è –≤ –Ω–µ–π.

–°–∞–º—ã–π –ø—Ä–æ—Å—Ç–æ–π —Å–ø–æ—Å–æ–± —Ä–µ—à–∏—Ç—å —ç—Ç—É –ø—Ä–æ–±–ª–µ–º—É ‚Äî –ø—Ä–æ—Å—Ç–æ –ø—Ä–æ–∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç –Ω–µ–∞–∫—Ç—É–∞–ª—å–Ω–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞.

## –í—ã–±—Ä–∞—Å—ã–≤–∞–µ–º –ø—Ä–æ—Å—Ä–æ—á–∫—É

–ú–æ–∂–Ω–æ –ø—Ä–æ—Å—Ç–æ —Å–æ–∑–¥–∞—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é `isIgnored` –∏ –ø—Ä–∏—Å–≤–∞–∏–≤–∞—Ç—å –µ–π –∑–Ω–∞—á–µ–Ω–∏–µ `true` –≤ –º–æ–º–µ–Ω—Ç, –∫–æ–≥–¥–∞ –∑–∞–ø—Ä–æ—Å —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –Ω–µ–∞–∫—Ç—É–∞–ª—å–Ω—ã–º:

```ts
useEffect(() => {
  let isIgnored = false;

  fetchData(searchString).then((data) => {
    if (!isIgnored) {
      setData(data);
    }
  });

  return () => {
    // –ö–æ–≥–¥–∞ —Ö—É–∫ —Ä–∞–∑–º–æ–Ω—Ç–∏—Ä—É–µ—Ç—Å—è,
    // —Ä–µ–∑—É–ª—å—Ç–∞—Ç –∑–∞–ø—Ä–æ—Å–∞ –Ω–∞–º –±–æ–ª–µ–µ –Ω–µ –∏–Ω—Ç–µ—Ä–µ—Å–µ–Ω
    isIgnored = true;
  };
}, [searchString]);
```

–¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º –ø—Ä–æ–±–ª–µ–º–∞ –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –±—É–¥–µ—Ç —Ä–µ—à–µ–Ω–∞ –∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –±–æ–ª–µ–µ –ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º–æ –≤ –Ω–µ–ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º—ã—Ö —É—Å–ª–æ–≤–∏—è—Ö:

<Demo title="–°–æ—Å—Ç–æ—è–Ω–∏–µ –≥–æ–Ω–∫–∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ (–¥–µ–º–æ)">
  <RaceConditionFixed client:visible />
</Demo>

–ü–æ—Å–º–æ—Ç—Ä–∏–º, —á—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å –Ω–∞ –¥–∏–∞–≥—Ä–∞–º–º–µ:

<Demo title="–°–æ—Å—Ç–æ—è–Ω–∏–µ –≥–æ–Ω–∫–∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ (–¥–∏–∞–≥—Ä–∞–º–º–∞)">
  <RaceConditionFixedTimeline client:visible />
</Demo>

–¢–µ–ø–µ—Ä—å –ø—Ä–∏ –∫–∞–∂–¥–æ–º –∏–∑–º–µ–Ω–µ–Ω–∏–∏ `searchString` –º—ã –ø—Ä–æ—Å—Ç–æ –Ω–∞—á–∏–Ω–∞–µ–º –∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ –∞–∫—Ç–∏–≤–Ω–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞.

–ò–∑–Ω–∞—á–∞–ª—å–Ω–∞—è –ø—Ä–æ–±–ª–µ–º–∞ —Ä–µ—à–µ–Ω–∞, –Ω–æ —Ç–µ–ø–µ—Ä—å –ø–æ–ª—É—á–∞–µ—Ç—Å—è, —á—Ç–æ –±—Ä–∞—É–∑–µ—Ä —Ç—Ä–∞—Ç–∏—Ç —Ä–µ—Å—É—Ä—Å—ã –Ω–∞ –±–µ—Å–ø–æ–ª–µ–∑–Ω–æ–µ —Å–µ—Ç–µ–≤–æ–µ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ. –ú–æ–∂–Ω–æ –ª–∏ –∫–∞–∫-—Ç–æ —Å–∫–∞–∑–∞—Ç—å —Å–∞–º–æ–º—É –±—Ä–∞—É–∑–µ—Ä—É, —á—Ç–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç –∑–∞–ø—Ä–æ—Å–∞ –Ω–∞–º –±–æ–ª—å—à–µ –Ω–µ –Ω—É–∂–µ–Ω, —á—Ç–æ–±—ã –æ–Ω –æ—Ç–º–µ–Ω–∏–ª –µ–≥–æ?

## –≠–∫–æ–Ω–æ–º–∏–º —Ç—Ä–∞—Ñ–∏–∫

–ù–∞ —Å–∞–º–æ–º –¥–µ–ª–µ —Å–æ–∑–¥–∞–Ω–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π `isIgnored` ‚Äî –¥–æ–≤–æ–ª—å–Ω–æ –∫—É—Å—Ç–∞—Ä–Ω—ã–π —Å–ø–æ—Å–æ–± —Ä–µ—à–µ–Ω–∏—è –ø—Ä–æ–±–ª–µ–º—ã, –≤–µ–¥—å –≤ –±—Ä–∞—É–∑–µ—Ä–µ –µ—Å—Ç—å –±–æ–ª–µ–µ –º–æ—â–Ω—ã–π –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π –º–µ—Ö–∞–Ω–∏–∑–º ‚Äî [AbortController](https://developer.mozilla.org/en-US/docs/Web/API/AbortController). –ü–æ–ø—Ä–æ–±—É–µ–º –ø–µ—Ä–µ–ø–∏—Å–∞—Ç—å –∫–æ–¥ —Å –µ–≥–æ –ø–æ–º–æ—â—å—é:

```ts
useEffect(() => {
  const abortController = new AbortController();

  fetchData(searchString).then((data) => {
    if (!abortController.signal.aborted) {
      setData(data);
    }
  });

  return () => {
    abortController.abort();
  };
}, [searchString]);
```

–ö–æ–Ω—Ü–µ–ø—Ç—É–∞–ª—å–Ω–æ –Ω–∏—á–µ–≥–æ –Ω–µ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å, –ø–æ—Å–∫–æ–ª—å–∫—É `AbortController` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –Ω–∞—à–∏–º –∫–æ–¥–æ–º, –∞ —Ñ—É–Ω–∫—Ü–∏—è, –æ—Å—É—â–µ—Å—Ç–≤–ª—è—é—â–∞—è –∑–∞–ø—Ä–æ—Å, –Ω–∏—á–µ–≥–æ –æ –Ω—ë–º –Ω–µ –∑–Ω–∞–µ—Ç.

–ß—Ç–æ–±—ã —É–≤–∏–¥–µ—Ç—å –≤—Å—é –º–æ—â—å `AbortController`, –Ω–∞–º –ø–æ–Ω–∞–¥–æ–±–∏—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—é, –∫–æ—Ç–æ—Ä–∞—è —É–º–µ–µ—Ç —Å –Ω–∏–º —Ä–∞–±–æ—Ç–∞—Ç—å. –ö —Å—á–∞—Å—Ç—å—é –æ–±—ã—á–Ω—ã–π `fetch` –∫–∞–∫ —Ä–∞–∑ —É–º–µ–µ—Ç —ç—Ç–æ –¥–µ–ª–∞—Ç—å ‚Äî –æ–Ω –ø—Ä–∏–Ω–∏–º–∞–µ—Ç —Å–∏–≥–Ω–∞–ª –æ—Ç–º–µ–Ω—ã (`signal`) –≤ –∫–∞—á–µ—Å—Ç–≤–µ –æ–¥–Ω–æ–≥–æ –∏–∑ –Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤:

```ts
useEffect(() => {
  const abortController = new AbortController();

  fetch(`${apiUrl}?q=${searchString}`, {
    // –ü–µ—Ä–µ–¥–∞—ë–º –∏—Å—Ç–æ—á–Ω–∏–∫ —Å–æ–±—ã—Ç–∏—è –æ—Ç–º–µ–Ω—ã
    signal: abortController.signal,
  }).then((data) => {
    setData(data);
  });

  return () => {
    abortController.abort();
  };
}, [searchString]);
```

–í–Ω—É—Ç—Ä–∏ –±—Ä–∞—É–∑–µ—Ä –ø–æ–¥–ø–∏—à–µ—Ç—Å—è –Ω–∞ —Å–æ–±—ã—Ç–∏–µ `abort` —É —Å–∏–≥–Ω–∞–ª–∞ –∏ –ø—Ä–µ—Ä–≤—ë—Ç –∑–∞–ø—Ä–æ—Å, –∫–æ–≥–¥–∞ —Å–æ–±—ã—Ç–∏–µ –ø—Ä–æ–∏–∑–æ–π–¥—ë—Ç:

<Demo title="–û—Ç–º–µ–Ω–∞ –∑–∞–ø—Ä–æ—Å–∞ (–¥–∏–∞–≥—Ä–∞–º–º–∞)">
  <AbortControllerTimeline client:visible />
</Demo>

–£–±–µ–¥–∏–º—Å—è, —á—Ç–æ —ç—Ç–æ –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:

<Demo title="–ü–æ–∏—Å–∫ –ø–æ GitHub-—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è–º">
  <Aside title="–í–Ω–∏–º–∞–Ω–∏–µ!" type="warning">
    –≠—Ç–∞ –¥–µ–º–∫–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç [GitHub API](https://docs.github.com/ru/rest/search/search?apiVersion=2022-11-28#search-repositories), –∫–æ—Ç–æ—Ä—ã–π –∏–º–µ–µ—Ç –∫–≤–æ—Ç—É –Ω–∞ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø—Ä–æ—Å–æ–≤ —Å –æ–¥–Ω–æ–≥–æ –∞–¥—Ä–µ—Å–∞, –ø–æ—ç—Ç–æ–º—É –ø—Ä–∏ —á–∞—Å—Ç–æ–º –æ–±—Ä–∞—â–µ–Ω–∏–∏ –º–æ–∂–µ—Ç –ø—Ä–µ–≤—Ä–∞—Ç–∏—Ç—å—Å—è –≤ —Ç—ã–∫–≤—É. üòê
  </Aside>

<br />

  <RepoSearch client:visible />
</Demo>

–í DevTools –º—ã —É–≤–∏–¥–∏–º –Ω–µ—á—Ç–æ –ø–æ–¥–æ–±–Ω–æ–µ:

![–û—Ç–º–µ–Ω—ë–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã](/hacknote-js/images/race-condition/cancelled-requests.webp)

–ü–æ–±–µ–¥–∞! –ë—Ä–∞—É–∑–µ—Ä —Ñ–∏–∑–∏—á–µ—Å–∫–∏ –æ—Ç–º–µ–Ω–∏–ª –Ω–µ–∞–∫—Ç—É–∞–ª—å–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã –∏ –Ω–µ —Ç—Ä–∞—Ç–∏—Ç –Ω–∞ –Ω–∏—Ö —Ç—Ä–∞—Ñ–∏–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.

## –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –±—ã–≤–∞—é—Ç –Ω–µ–ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º—ã–º–∏, –ø–æ—Å–∫–æ–ª—å–∫—É —Ñ–∏–∑–∏—á–µ—Å–∫–∏ –º–æ–≥—É—Ç –≤—ã–ø–æ–ª–Ω—è—Ç—å—Å—è –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ –æ—Å–Ω–æ–≤–Ω–æ–º—É –ø–æ—Ç–æ–∫—É, –ø–æ—ç—Ç–æ–º—É –æ—á–µ–Ω—å –≤–∞–∂–Ω–æ —Å–ª–µ–¥–∏—Ç—å –∑–∞ –∞–∫—Ç—É–∞–ª—å–Ω–æ—Å—Ç—å—é –¥–∞–Ω–Ω—ã—Ö, –∫–æ—Ç–æ—Ä—ã–µ –æ–Ω–∏ –Ω–∞–º –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç. –°–ø–æ—Å–æ–±—ã —Ä–µ—à–µ–Ω–∏—è –ø—Ä–æ–±–ª–µ–º –¥–æ–≤–æ–ª—å–Ω–æ –ø—Ä–æ—Å—Ç—ã–µ, –ø–æ—ç—Ç–æ–º—É –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–µ—Ä–∂–∞—Ç—å –≤ –≥–æ–ª–æ–≤–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏—è –≥–æ–Ω–∫–∏ –ø—Ä–∏ –Ω–∞–ø–∏—Å–∞–Ω–∏–∏ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–≥–æ –∫–æ–¥–∞.
